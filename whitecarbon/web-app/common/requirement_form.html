<link rel="stylesheet" href="bootstrap/css/bootstrap.css"
	type="text/css" />
<style>
	hr {
		  margin-bottom: 5px;
    	  margin-top: -5px; 
	}
	
	.alert {
		margin-bottom: 5px;
	}
	
	form {
		margin-bottom: 0px;
	}
	
	.popover {
		width : 50%;
	}

	.btn-success {
		font-weight: bold;
	}
	
	.accordion-heading {
		font-size: 12px;
		text-transform: uppercase;
		background-color: #eee;
	  border: 1px solid #ccc;
	  border: 1px solid rgba(0, 0, 0, 0.2);
	  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	     -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	}
	
	.accordion-heading > a{
		color : #222;
	}
</style>

<div class="alert alert-info">
	<b> LET US KNOW WHAT YOU REQUIRE </b>
	<p class="pull-right" style="margin-right:-30px;">
		<a href="#" class="requirements-form-close-link">
			<i class="icon-remove"></i>
		</a>
	</p>
</div>
<div class="alert alert-error" style="display: none;">
	<ul id="validation_errors">
	</ul>
</div>
<div class="well" style="margin-top: 2px;margin-bottom: 2px;padding-top: 2px;padding-bottom: 2px;">
	* indicates required fields. <br/>
	^ indicates that you must enter atleast one of the fields marked as '^'.
</div>
<div class="accordion" id="accordion2">
	<div>
		<table>
			<tr>
				<td><label for="name">Name*</label></td>
				<td><input id="name" name="name" type="text" />
				</td>
				<td><label for="company_name">Company Name</label></td>
				<td><input id="company_name" name="company_name" type="text" />
				</td>
			</tr>

			<tr>
				<td><label for="email">Email*</label></td>
				<td><input id="email" name="email" type="text" />
				</td>
				<td><label for="mobileNo">Mobile No.*</label></td>
				<td><input id="mobileNo" name="mobileNo" type="text" />
				</td>
			</tr>
			<tr>
				<td><label for="officeNo">Office No</label></td>
				<td><input id="officeNo" name="officeNo" type="text" />
				</td>
			</tr>
		</table>
	</div>
	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse"
				data-parent="#accordion2" href="#collapseOne"> Solitaire </a>
		</div>
		<div id="collapseOne" class="accordion-body collapse in">
			<div class="accordion-inner">
				<form id="solitaire-form" action="#">
					<input type="hidden" name="form" value="solitaire"/>
					<table>
						<tr>
							<td><label for="solitaire_shape">Shape</label></td>
							<td><select id="solitaire_shape" name="solitaire_shape"
								class="input-mini">
									<option value="Any">Any</option>
									<option value="Round">Round</option>
									<option value="Princess">Princess</option>
									<option value="Emerald">Emerald</option>
									<option value="Marquise">Marquise</option>
									<option value="Asscher">Asscher</option>
									<option value="Radiant">Radiant</option>
									<option value="Cushion">Cushion</option>
									<option value="Oval">Oval</option>
									<option value="Pear">Pear</option>
									<option value="Heart">Heart</option>
							</select></td>
						</tr>

						<tr>
							<td><label for="solitaire_single_pair">Single/Pair*</label></td>
							<td><select id="solitaire_single_pair"
								name="solitaire_single_pair">
									<option value="nil"> </option>
									<option value="Single">Single</option>
									<option value="Pair">Pair</option>
							</select></td>
						</tr>

						<tr>
							<td><label for="weight_per_stone">Weight Per Stone*</label></td>
							<td><input id="weight_per_stone" name="weight_per_stone"
								type="text" class="input-mini numeric" placeholder="Enter Weight" /></td>
						</tr>

						<tr>
							<td><label>Color*</label></td>
							<td><select id="solitaire_color_from" name="solitaire_color_from"
								class="input-mini">
									<option value="nil"> </option>
									<option value="D">D</option>
									<option value="E">E</option>
									<option value="F">F</option>
									<option value="G">G</option>
									<option value="H">H</option>
									<option value="I">I</option>
									<option value="J">J</option>
									<option value="K">K</option>
									<option value="L">L</option>
									<option value="M">M</option>
									<option value="N-">N-</option>
							</select> - 
							<select id="solitaire_color_to" name="solitaire_color_to" class="input-mini">
									<option value="nil"> </option>
									<option value="D">D</option>
									<option value="E">E</option>
									<option value="F">F</option>
									<option value="G">G</option>
									<option value="H">H</option>
									<option value="I">I</option>
									<option value="J">J</option>
									<option value="K">K</option>
									<option value="L">L</option>
									<option value="M">M</option>
									<option value="N-">N-</option>
							</select></td>
						</tr>

						<tr>
							<td><label>Clarity^</label></td>
							<td><select id="solitaire_clarity_from" name="solitaire_clarity_from"
								class="input-mini">
									<option value="nil"> </option>
									<option value="IF">IF</option>
									<option value="VVS1">VVS1</option>
									<option value="VVS2">VVS2</option>
									<option value="VS1">VS1</option>
									<option value="VS2">VS2</option>
									<option value="SI1">SI1</option>
									<option value="SI2">SI2</option>
									<option value="I1">I1</option>
									<option value="I2">I2</option>
									<option value="I3">I3</option>
							</select> - 
							<select id="solitaire_clarity_to" name="solitaire_clarity_to" class="input-mini">
									<option value="nil"> </option>
									<option value="IF">IF</option>
									<option value="VVS1">VVS1</option>
									<option value="VVS2">VVS2</option>
									<option value="VS1">VS1</option>
									<option value="VS2">VS2</option>
									<option value="SI1">SI1</option>
									<option value="SI2">SI2</option>
									<option value="I1">I1</option>
									<option value="I2">I2</option>
									<option value="I3">I3</option>
							</select></td>
						</tr>

						<tr>
							<td><label for="solitaire_cut">Cut</label></td>
							<td><select id="solitaire_cut" name="solitaire_cut" class="input-mini">
									<option value="nil"> </option>
									<option value="Any">Any</option>
									<option value="XXX">XXX</option>
									<option value="XXVG">XXVG</option>
									<option value="XVGVG">XVGVG</option>
									<option value="VGVGVG">VGVGVG</option>
							</select></td>
						</tr>
						
						<tr>
							<td><label for="solitaire_polish">Polish</label></td>
							<td><select id="solitaire_polish" name="solitaire_polish" class="input-mini">
									<option value="Any">Any</option>
									<option value="XXX">XXX</option>
									<option value="XXVG">XXVG</option>
									<option value="XVGVG">XVGVG</option>
									<option value="VGVGVG">VGVGVG</option>
							</select></td>
						</tr>
						
						<tr>
							<td><label for="solitaire_syymetry">Syymetry</label></td>
							<td><select id="solitaire_syymetry" name="solitaire_syymetry" class="input-mini">
									<option value="Any">Any</option>
									<option value="XXX">XXX</option>
									<option value="XXVG">XXVG</option>
									<option value="XVGVG">XVGVG</option>
									<option value="VGVGVG">VGVGVG</option>
							</select></td>
						</tr>

						<tr>
							<td><label>Price^</label></td>
							<td><input id="solitaire_price_from" name="solitaire_price_from" type="text"
								class="input-mini numeric" /> to <input id="solitaire_price_to" name="solitaire_price_to"
								type="text" class="input-mini numeric" /></td>
						</tr>
					</table>
					<hr />
					<input type="submit" class="btn btn-success" value="Send" />
				</form>
			</div>
		</div>
	</div>
	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse"
				data-parent="#accordion2" href="#collapseTwo"> Loose Diamonds </a>
		</div>
		<div id="collapseTwo" class="accordion-body collapse">
			<div class="accordion-inner">
				<div class="well" style="margin-top: 2px;margin-bottom: 2px;padding-top: 2px;padding-bottom: 2px;">
					* indicates mandatory fields. <br/>
					^ indicates that you must enter atleast one of the fields marked as '^'.
				</div>
				<form id="loose-diamonds-form" action="#">
					<input type="hidden" name="form" value="looseDiamonds"/>
					<table>
						<tr>
							<td><label for="loose_diamonds_shape">Shape*</label></td>
							<td><select id="loose_diamonds_shape"
								name="loose_diamonds_shape" class="input-mini">
									<option value="nil"> </option>
									<option value="Any">Any</option>
									<option value="Round">Round</option>
									<option value="Princess">Princess</option>
									<option value="Emerald">Emerald</option>
									<option value="Marquise">Marquise</option>
									<option value="Asscher">Asscher</option>
									<option value="Radiant">Radiant</option>
									<option value="Cushion">Cushion</option>
									<option value="Oval">Oval</option>
									<option value="Pear">Pear</option>
									<option value="Heart">Heart</option>
							</select></td>
						</tr>

						<tr>
							<td><label>Quantity*</label></td>
							<td><input id="loose_diamonds_qty_from"
								name="loose_diamonds_qty_from" type="text" class="input-mini numeric" />

								to <input id="loose_diamonds_qty_to"
								name="loose_diamonds_qty_to" type="text" class="input-mini numeric" />
							</td>
						</tr>

						<tr>
							<td><label>Color*</label></td>
							<td><select id="loose_diamonds_color_from"
								name="loose_diamonds_color_from" class="input-mini">
									<option value="nil"> </option>
									<option value="D">D</option>
									<option value="E">E</option>
									<option value="F">F</option>
									<option value="G">G</option>
									<option value="H">H</option>
									<option value="I">I</option>
									<option value="J">J</option>
									<option value="K">K</option>
									<option value="L">L</option>
									<option value="M">M</option>
									<option value="N-">N-</option>
							</select> - 
							<select id="loose_diamonds_color_to"
								name="loose_diamonds_color_to" class="input-mini">
									<option value="nil"> </option>
									<option value="D">D</option>
									<option value="E">E</option>
									<option value="F">F</option>
									<option value="G">G</option>
									<option value="H">H</option>
									<option value="I">I</option>
									<option value="J">J</option>
									<option value="K">K</option>
									<option value="L">L</option>
									<option value="M">M</option>
									<option value="N-">N-</option>
							</select></td>
						</tr>

						<tr>
							<td><label>Clarity^</label></td>
							<td><select id="loose_diamonds_clarity_from"
								name="loose_diamonds_clarity_from" class="input-mini">
									<option value="nil"> </option>
									<option value="IF">IF</option>
									<option value="VVS1">VVS1</option>
									<option value="VVS2">VVS2</option>
									<option value="VS1">VS1</option>
									<option value="VS2">VS2</option>
									<option value="SI1">SI1</option>
									<option value="SI2">SI2</option>
									<option value="I1">I1</option>
									<option value="I2">I2</option>
									<option value="I3">I3</option>
							</select> - 
							<select id="loose_diamonds_clarity_to"
								name="loose_diamonds_clarity_to" class="input-mini">
									<option value="nil"> </option>
									<option value="IF">IF</option>
									<option value="VVS1">VVS1</option>
									<option value="VVS2">VVS2</option>
									<option value="VS1">VS1</option>
									<option value="VS2">VS2</option>
									<option value="SI1">SI1</option>
									<option value="SI2">SI2</option>
									<option value="I1">I1</option>
									<option value="I2">I2</option>
									<option value="I3">I3</option>
							</select></td>
						</tr>

						<tr>
							<td><label for="loose_diamonds_cut">Cut</label></td>
							<td><select id="loose_diamonds_cut"
								name="loose_diamonds_cut" class="input-mini">
									<option value="Any">Any</option>
									<option value="XXX">XXX</option>
									<option value="XXVG">XXVG</option>
									<option value="XVGVG">XVGVG</option>
									<option value="VGVGVG">VGVGVG</option>
							</select></td>
						</tr>

						<tr>
							<td><label>Price Range^</label></td>
							<td><input id="loose_diamonds_price_from"
								name="loose_diamonds_price_from" type="text" class="input-mini numeric" />

								to <input id="loose_diamonds_price_to"
								name="loose_diamonds_price_to" type="text" class="input-mini numeric" />
							</td>
						</tr>
					</table>
					<hr />
					<input type="submit" class="btn btn-success" value="Send" />
				</form>
			</div>
		</div>
	</div>
	<div class="accordion-group">
		<div class="accordion-heading">
			<a class="accordion-toggle" data-toggle="collapse"
				data-parent="#accordion2" href="#collapseThree"> Jewelry </a>
		</div>
		<div id="collapseThree" class="accordion-body collapse">
			<div class="accordion-inner">
				<form id="jewelry-form" action="#" onsubmit="return false;">
					<input type="hidden" name="form" value="jewelry" />
					<table>
						<tr>
							<td><label for="jewelry_category">Category*</label></td>
							<td><select id="jewelry_category" name="jewelry_category">
									<option value="nil"> </option>
									<option value="Necklace">Necklace</option>
									<option value="Pendant">Pendant</option>
									<option value="Earring">Earring</option>
									<option value="Pendant Set">Pendant Set</option>
									<option value="Ring">Ring</option>
									<option value="Timanya">Timanya</option>
									<option value="Bangle">Bangle</option>
									<option value="Churri">Churri</option>
									<option value="Nose Pin">Nose Pin</option>
							</select></td>
						</tr>
						<tr>
							<td><label>Price*</label></td>
							<td><input id="jewelry_price_from" name="jewelry_price_from" type="text"
								class="input-mini numeric" /> to 
								<input id="jewelry_price_to" name="jewelry_price_to"
								type="text" class="input-mini numeric" /></td>
						</tr>
					</table>
					<hr />
					<input type="submit" class="btn btn-success" value="Send" />
				</form>
			</div>
		</div>
	</div>
</div>

<script>
	$(document).ready(function(){
		$(".numeric").keydown(function(event) {
			   if(event.shiftKey)
			        event.preventDefault();
			   if (event.keyCode == 46 || event.keyCode == 8) {
			   }
			   else {
			     if (event.keyCode < 95) {
			  	    if (event.keyCode < 48 || event.keyCode > 57) {
			          event.preventDefault();
			    	}
			  } 
			  else {
			          if (event.keyCode < 96 || event.keyCode > 105) {
			             event.preventDefault();
			          }
			      }
			  }
		});
	});
	
	$("form").submit(function(e) {
		  var currFormId = $(this).attr('id');
		  var f = $(this);
		  
		  e.preventDefault();
          e.stopPropagation();
		  
		  if(currFormId == "solitaire-form") {
			  if(!validateSolitaireRequirementsForm() && !validateContactData()) {
				 return false;
			  } else {
				 ajaxSendForm(f); 
			  }
		  } 
		  
		  if(currFormId == "loose-diamonds-form") {
			  if(!validateLooseDiamondsRequirementsForm() && !validateContactData()) {
				 return false;
			  } else { 
				  ajaxSendForm(f);
			  }
		  }
		  
		  if(currFormId == "jewelry-form") {
			  if(!validateJewelryRequirementsForm() && !validateContactData()) {
				 return false;
			  } else {
				 ajaxSendForm(f);
			  }
		  }
		  
		  return false;
    });
	
	function ajaxSendForm(form) {
		var name = $('#name').val();
		var email = $('#email').val();
		var mobileNo = $('#mobileNo').val();
		var company_name = $('#company_name').val();
		
		$.ajax({
		    type: "POST",
	        url: 'requirements/sendRequirementsForm',
 		    async : true,
 		    data : form.serialize() + "&name=" + name + "&email="+email +"&mobileNo=" + mobileNo + "&company_name="+company_name,
			success: function(data) {
				$('#requirementFormPopOverLink').popover('destroy');				
			}
		});
	}
	
	function validateContactData() {
		var name = $('#name').val();
		var email = $('#email').val();
		var mobileNo = $('#mobileNo').val();
		
		$('.alert-error').hide();
		var valid = true;
		
		var error = "";
		
		if(name == null || name == '') {
			valid = false;
			error += "<li>Name is a required field.</li>";
		}
		
		if(email == null || email == '') {
			valid = false;
			error += "<li>Email is a required field.</li>";
		}
		
		if(mobileNo == null || mobileNo == '') {
			valid = false;
			error += "<li>Mobile No is a required field.</li>";
		}
		
		if(!valid) {
			var html = $('#validation_errors').html();
			html += error;
			$('.alert-error').show();
			$('#validation_errors').append(html);
			return false;
		}
		
		return true;
	}

	function validateSolitaireRequirementsForm() {
		var weight_per_stone = $('#weight_per_stone').val();
		
		var solitaire_single_pair = $('#solitaire_single_pair').val();
		
		var solitaire_clarity_from = $('#solitaire_clarity_from').val();
		var solitaire_clarity_to = $('#solitaire_clarity_to').val();
		
		var solitaire_color_from = $('#solitaire_color_from').val();
		var solitaire_color_to = $('#solitaire_color_to').val();
		
		var solitaire_price_from = $('#solitaire_price_from').val();
		var solitaire_price_to = $('#solitaire_price_to').val();
		
		$('.alert-error').hide();
		$('#validation_errors').html('');
		var valid = true;
		
		var error = "";
		
		if(solitaire_single_pair == null || solitaire_single_pair == 'nil') {
			valid = false;
			error += "<li>Single/Pair is a required field.</li>";
		}
		
		if(weight_per_stone == null || weight_per_stone == '') {
			valid = false;
			error += "<li>Weight Per Stone is a required field.</li>";
		}
		
		if((solitaire_color_from == null || solitaire_color_from == 'nil')
				|| (solitaire_color_to == null || solitaire_color_to == 'nil')) {
			valid = false;
			error += "<li>Color is a required field.</li>";
		}
		
		if(((solitaire_clarity_from == null || solitaire_clarity_from == 'nil')
				|| (solitaire_clarity_to == null || solitaire_clarity_to == 'nil'))
			&&
			((solitaire_price_from == null || solitaire_price_from == '')
					|| (solitaire_price_to == null || solitaire_price_to == ''))) {
			valid = false;
			error += "<li>Please enter one of the two : 1. Clarity or 2. Price Range.</li>";
		}
		
		if(!valid) {
			$('.alert-error').show();
			$('#validation_errors').append(error);
			return false;
		}
		
		return true;
	}

	function validateLooseDiamondsRequirementsForm() {
		var loose_diamonds_shape = $('#loose_diamonds_shape').val();
		
		var loose_diamonds_qty_from = $('#loose_diamonds_qty_from').val();
		var loose_diamonds_qty_to = $('#loose_diamonds_qty_to').val();
		
		
		var loose_diamonds_color_from = $('#loose_diamonds_color_from').val();
		var loose_diamonds_color_to = $('#loose_diamonds_color_to').val();
		
		var loose_diamonds_clarity_from = $('#loose_diamonds_clarity_from').val();
		var loose_diamonds_clarity_to = $('#loose_diamonds_clarity_to').val();
		
		var loose_diamonds_price_from = $('#loose_diamonds_price_from').val();
		var loose_diamonds_price_to = $('#loose_diamonds_price_to').val();
		
		$('.alert-error').hide();
		$('#validation_errors').html('');
		var valid = true;
		
		var error = "";
		
		if(loose_diamonds_shape == null || loose_diamonds_shape == 'nil') {
			valid = false;
			error += "<li>Shape is a required field.</li>";
		}
		
		if((loose_diamonds_qty_from == null || loose_diamonds_qty_from == '')
				|| (loose_diamonds_qty_to == null || loose_diamonds_qty_to == '')) {
				valid = false;
				error += "<li>Quantity is a required field.</li>";
		}
		
		if((loose_diamonds_color_from == null || loose_diamonds_color_from == 'nil')
			|| (loose_diamonds_color_to == null || loose_diamonds_color_to == 'nil')) {
			valid = false;
			error += "<li>Color is a required field.</li>";
		}
		
		if(((loose_diamonds_clarity_from == null || loose_diamonds_clarity_from == 'nil')
				|| (loose_diamonds_clarity_to == null || loose_diamonds_clarity_to == 'nil'))
			&&
			((loose_diamonds_price_from == null || loose_diamonds_price_from == '')
					|| (loose_diamonds_price_to == null || loose_diamonds_price_to == ''))) {
			valid = false;
			error += "<li>Please enter one of the two : 1. Clarity or 2. Price Range.</li>";
		}
		
		if(!valid) {
			$('.alert-error').show();
			$('#validation_errors').append(error);
			return false;
		}
		
		return true;
	}

	function validateJewelryRequirementsForm() {
		var jewelry_category = $('#jewelry_category').val();
		
		var jewelry_price_from = $('#jewelry_price_from').val();
		var jewelry_price_to = $('#jewelry_price_to').val();
		
		$('.alert-error').hide();
		$('#validation_errors').html('');
		var valid = true;
		
		var error = "";
		
		if(jewelry_category == null || jewelry_category == 'nil') {
			valid = false;
			error += "<li>Category is a required field.</li>";
		}
		
		if((jewelry_price_from == null || jewelry_price_from == '')
				|| (jewelry_price_to == null || jewelry_price_to == '')) {
			valid = false;
			error += "<li>Price is a required field.</li>";
		}
		
		if(!valid) {
			$('.alert-error').show();
			$('#validation_errors').append(error);
			return false;
		}
		
		return true;
	}
</script>